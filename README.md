# Курсовая работа

## Задание
Разработать и реализовать систему для поиска рецептов. Система состоит из 2-ух частей: Интерфейс администрара и телеграм-бот для пользователей. Система хранит на сервере базу данных, только админимстратор может создавть и удалять записи

### Возможности пользователей:
* Создание и удаление записей
### Возможности пользователей:
* поиск рецептов по названию
* получение случайного рецепта

### Ссылки на курсовую работу
* http://f0767737.xsph.ru - интерфейc администратора
* https://t.me/recipes42_bot - телеграм-бот

## Используемые технологии
### Языки
Панель администратора и связь телеграм бота с базой данных - PHP, html+css, sql. Для бота используется Python

### Фреймворк
Для дизайна панели администратора - bootstrap

### Библиотеки
Для создания телеграм бота - aiogram, request

## Ход работы
### Интерфейса администратора
* Страница авторизации
 
  ![Рис. 1 - Авторизация](https://github.com/4260snow/coursework_sem3/blob/main/images/login.png)

* Панель администратора

  ![Рис. 2 - Панель адм.](https://github.com/4260snow/coursework_sem3/blob/main/images/ai.png)
  
* Запись рецепта в бд

  ![Рис. 3 - Запись](https://github.com/4260snow/coursework_sem3/blob/main/images/create.png)
  
### Пользовательских интерфейс
  чат в telegram
  
  ![Рис. 4 - UI](https://github.com/4260snow/coursework_sem3/blob/main/images/bot.png)
  
### Сценарии работы администратора
* Авторизация. При входе администратор вводит логин и пароль, если логин неверный, то появляетяся сообщение об этом над полем ввода логина. Аналогично с паролем, в случае ввода неверного пароля появляетяся сообщение об этом над полем ввода пароля

* Сценарий добавления нового рецепта. Поля названия и самого рецепта являются обязательными, пока они не будут заполены невозможно отправить запись в базу данных (название ограничено 250, а текст рецепта 2400 символами). Если администратор нажмёт на кнопку "записать" над незаполнеными полями "всплывает" надпись напоминающая об обязательном заполнении. Также есть поле краткого описания (ограниченно 250 симв).

### Сценарии пользователей
* После запуска бота (команда /start) пользователь получает сообщение с приветствием и возможностями бота (доступными командами/функциями): Поиск рецепта по названию (команда /name 'название') и запросо случайного рецепта (команда /rand_food или слово "случайный")

* Если пользователь пишет неизвестную для бота команду или текст, то бот отправляет сообщение "Я Вас не понимаю"

* Когда пользователь отправляет команду /help, бот пишет список доступных команд

* Пользователь пишет: "/name Пангалактический грызлодёр" (символы в названии могут быть в любом регистре). В этом случае бот отправляет запрос к базе данных. Пусть такой рецепт существует в базе, тогда сервер формирует json, который затем отправляет боту, а бот в свою очередь преобразует json в текст (название выделяется полужирным шрифтом, краткое описание выделяется курсивом) и отправляет пользователю

* Неудачный для пользователя сценарий, если он отправил команду /name с названием которого нет в базе, тогда бот, получив от сервера json без рецепта, пишет пользователю: "На данный момент у нас нет такого рецепта"

* Если пользователь отправил команду /name без параметров, то бот предложит ввести команду ещё раз и добавить желаемое название, также предложит попробовать команду /rand_food


## Описание client-server и хореографии
* Создание новой записи
![Рис. 5 - Adm-serv](https://github.com/4260snow/coursework_sem3/blob/main/images/admserv.svg)

* Запрос существующего рецепта по названию (/name arg)
![Рис. 6 - get1](https://github.com/4260snow/coursework_sem3/blob/main/images/get1.svg)

* Запрос случайного рецепта (/rand_food)
![Рис. 6 - get2](https://github.com/4260snow/coursework_sem3/blob/main/images/get2.svg)
